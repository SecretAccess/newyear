<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>10é€£ã‚¬ãƒãƒ£é¢¨ ãŠå¹´ç‰æŠ½é¸ãƒ„ãƒ¼ãƒ«</title>
  <!-- ã‚¹ãƒãƒ›å¯¾å¿œ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(to right, #ffecd2, #fcb69f);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      text-align: center;
      background-color: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      width: 95%;
      max-width: 480px;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
      color: #ff4500;
    }
    .select-wrapper {
      margin-bottom: 20px;
    }
    label {
      font-size: 1.0rem;
      margin-right: 5px;
    }
    select {
      font-size: 1.0rem;
      padding: 6px 10px;
      border-radius: 5px;
    }
    button {
      padding: 12px 20px;
      font-size: 1.0rem;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin: 10px 5px;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    button:hover:enabled {
      background-color: #45a049;
    }
    #drawArea {
      margin-top: 15px;
    }
    .slot {
      display: inline-block;
      margin: 5px;
      text-align: center;
      vertical-align: top;
      width: 90px;
      height: 100px;
      position: relative;
    }
    .slot img {
      width: 70px;
      height: auto;
      transition: transform 0.3s;
    }
    .slot img:hover {
      transform: scale(1.1);
    }
    .slot .amount-label {
      display: block;
      font-size: 0.9rem;
      margin-top: 3px;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ‰ 10é€£ã‚¬ãƒãƒ£é¢¨ ãŠå¹´ç‰æŠ½é¸ ğŸ‰</h1>

    <!-- å­¦å¹´åŒºåˆ†é¸æŠ -->
    <div class="select-wrapper">
      <label for="gradeSelect">å­¦å¹´ã‚’é¸æŠï¼š</label>
      <select id="gradeSelect">
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <option value="æœªå°±å­¦å…">æœªå°±å­¦å…</option>
        <option value="å°1">å°1</option>
        <option value="å°2">å°2</option>
        <option value="å°3">å°3</option>
        <option value="å°4">å°4</option>
        <option value="å°5">å°5</option>
        <option value="å°6">å°6</option>
        <option value="ä¸­1">ä¸­1</option>
        <option value="ä¸­2">ä¸­2</option>
        <option value="ä¸­3">ä¸­3</option>
        <option value="é«˜æ ¡ç”Ÿä»¥ä¸Š">é«˜æ ¡ç”Ÿä»¥ä¸Š</option>
      </select>
    </div>

    <!-- 10é€£ã‚¬ãƒãƒ£é–‹å§‹ãƒœã‚¿ãƒ³ -->
    <button id="drawButton" disabled>10é€£ã‚¬ãƒãƒ£ã‚’å›ã™</button>

    <!-- æŠ½é¸çµæœã®ã‚¹ãƒ­ãƒƒãƒˆã‚¨ãƒªã‚¢ -->
    <div id="drawArea"></div>
  </div>

  <script>
    // ==============================================================
    // 1) å­¦å¹´ã”ã¨ã®ã€Œé‡‘é¡+ãƒã‚ºãƒ¬ã€ç¢ºç‡è¨­å®š
    //
    // ä¾‹ï¼š æœªå°±å­¦å…
    //   2000å††ãŒ70%ã€ æ®‹ã‚Šã¯ (3000,4000,5000,6000,7000,8000,9000,10000,ãƒã‚ºãƒ¬) = 9é …ç›®ã‚’30%ã§å‡ç­‰å‰² â†’ each 3.3333%ã€‚
    // ==============================================================
    const distribution = {
      "æœªå°±å­¦å…": [
        { val: 2000,    prob: 0.70 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 } // ãƒã‚ºãƒ¬
      ],
      "å°1": [
        { val: 3000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "å°2": [
        { val: 3000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "å°3": [
        { val: 3000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "å°4": [
        { val: 3000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "å°5": [
        { val: 3000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "å°6": [
        { val: 5000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "ä¸­1": [
        { val: 5000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "ä¸­2": [
        { val: 5000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "ä¸­3": [
        { val: 5000,    prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 10000,   prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ],
      "é«˜æ ¡ç”Ÿä»¥ä¸Š": [
        { val: 10000,   prob: 0.70 },
        { val: 2000,    prob: 0.0333333 },
        { val: 3000,    prob: 0.0333333 },
        { val: 4000,    prob: 0.0333333 },
        { val: 5000,    prob: 0.0333333 },
        { val: 6000,    prob: 0.0333333 },
        { val: 7000,    prob: 0.0333333 },
        { val: 8000,    prob: 0.0333333 },
        { val: 9000,    prob: 0.0333333 },
        { val: 'hzure', prob: 0.0333333 }
      ]
    };

    // 2) ç´™å¹£ç”»åƒã¨ãƒã‚ºãƒ¬ç”»åƒ
    const imageMap = {
      1000: 'kitasato.png',  // 1000å††
      5000: 'umeko.png',     // 5000å††
      10000: 'shibusawa.png',// 10000å††
      hazure: 'hazure.png'
    };

    // ------------------------------------------------
    // DOMå–å¾—
    // ------------------------------------------------
    const gradeSelect = document.getElementById('gradeSelect');
    const drawButton  = document.getElementById('drawButton');
    const drawArea    = document.getElementById('drawArea');

    // å­¦å¹´æœªé¸æŠæ™‚ã¯ãƒœã‚¿ãƒ³ç„¡åŠ¹
    gradeSelect.addEventListener('change', () => {
      drawButton.disabled = (gradeSelect.value === "");
    });

    // ------------------------------------------------
    // 10é€£ã‚¬ãƒãƒ£ã‚’å›ã™å‡¦ç†
    // ------------------------------------------------
    drawButton.addEventListener('click', () => {
      drawArea.innerHTML = ''; // ãƒªã‚»ãƒƒãƒˆ

      const grade = gradeSelect.value;
      const dist  = distribution[grade];
      let total   = 0; // åˆè¨ˆé‡‘é¡

      // 10å›ãƒªã‚ºãƒ ã‚ˆãè¡¨ç¤º
      let index = 0;
      const maxPulls = 10;

      function pullOne() {
        if (index >= maxPulls) {
          // çµ‚äº†
          setTimeout(() => {
            alert(`10é€£ã‚¬ãƒãƒ£çµ‚äº†ï¼ åˆè¨ˆï¼š${total}å††`);
          }, 500);
          return;
        }
        index++;

        // 1) ã‚¹ãƒ­ãƒƒãƒˆè¦ç´ ã‚’ã‚ã‚‰ã‹ã˜ã‚ä½œæˆï¼ˆå›è»¢ã‚¢ãƒ‹ãƒ¡ç­‰ã‚ã‚Œã°ã“ã“ã§å¯¾å¿œå¯ï¼‰
        const slotDiv = document.createElement('div');
        slotDiv.className = 'slot';
        const img = document.createElement('img');
        img.src = ''; // å¾Œã§ç¢ºå®š
        const label = document.createElement('span');
        label.className = 'amount-label';

        slotDiv.appendChild(img);
        slotDiv.appendChild(label);
        drawArea.appendChild(slotDiv);

        // 2) ç°¡å˜ãªæ¼”å‡ºï¼š0.5ç§’å¾Œã«çµæœã‚’ç¢ºå®š
        setTimeout(() => {
          const val = drawOneValue(dist); // 1å›åˆ†ã®æŠ½é¸
          if (val === 'hzure') {
            // ãƒã‚ºãƒ¬
            img.src = imageMap['hazure'];
            label.textContent = 'ãƒã‚ºãƒ¬';
          } else {
            // å½“ãŸã‚Š(2000ã€œ10000)
            total += val;
            // è¡¨ç¤ºç”¨ã«"æœ€å¤§ç´™å¹£"ã‚’åˆ¤å®š
            const biggest = getBiggestBill(val);
            img.src = imageMap[biggest];
            label.textContent = `${val}å††`;
          }
        }, 500);

        // æ¬¡ã®æŠ½é¸ã¸ 1ç§’å¾Œãã‚‰ã„ã«å‘¼ã³å‡ºã™
        setTimeout(pullOne, 1000);
      }
      pullOne();
    });

    // ------------------------------------------------
    // 1å›åˆ†ã®æŠ½é¸
    // ------------------------------------------------
    function drawOneValue(dist) {
      const r = Math.random();
      let cumulative = 0;
      for (let i = 0; i < dist.length; i++) {
        cumulative += dist[i].prob;
        if (r <= cumulative) {
          return dist[i].val;
        }
      }
      // å¿µã®ãŸã‚
      return dist[0].val;
    }

    // ------------------------------------------------
    // é‡‘é¡ val(2000,3000,...10000) ã®ä¸­ã§
    // æœ€å¤§ç´™å¹£(1000,5000,10000)ã‚’è¿”ã™
    //   2000 â†’ 1000
    //   3000 â†’ 1000
    //   4000 â†’ 1000
    //   5000 â†’ 5000
    //   6000 â†’ 5000
    //   7000 â†’ 5000
    //   8000 â†’ 5000
    //   9000 â†’ 5000
    //   10000 â†’10000
    // ------------------------------------------------
    function getBiggestBill(val) {
      if (val === 10000) return 10000;
      if (val >= 5000)   return 5000;
      return 1000; // 2000ã€œ4000
    }
  </script>
</body>
</html>
